<script>
    window.EtoolsPmpApp = window.EtoolsPmpApp || {};
    window.EtoolsPmpApp.Mixins = window.EtoolsPmpApp.Mixins || {};
    /**
     * totalResult has to be set in the class that uses this
     * @polymer
     * @mixinFunction
     */
     EtoolsPmpApp.Mixins.FrontendPagination = baseClass => class extends baseClass {

      static get is() {
        return 'frontend-pagination-mixin';
      }

      static get properties() {
        return {
          pagination: {
            type: Object,
            value: {
              pageSize: 10,
              pageNumber: 1,
              totalResults: null
            }
          },
          dataItems: {
            type: Array
          }
        };
      }

      _pageSizeChanged(ev) {
        this.set('pagination.pageNumber', 1);
        this.set('pagination.pageSize', parseInt(ev.detail.value));
      }

      _pageNumberChanged(ev) {
        this.set('pagination.pageNumber', parseInt(ev.detail.value));
      }

      _paginationChanged(pageNumber, pageSize, listData) {

        if (this._anyUndefined([pageNumber, pageSize, listData])) {
          return;
        }
        pageNumber = parseInt(pageNumber);
        pageSize = parseInt(pageSize);
        let startingIndex = (pageNumber - 1) * pageSize;
        this.dataItems = listData.slice(startingIndex, startingIndex + pageSize);
      }

      _anyUndefined(items) {
        return items.some(this._isUndefined);
      }

      _isUndefined(item) {
        return typeof item === 'undefined';
      }

    };

  </script>
</dom-module>
