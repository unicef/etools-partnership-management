<link rel="import" href="../../../bower_components/etools-behaviors/etools-logs-mixin.html">
<script>

  window.EtoolsPmpApp = window.EtoolsPmpApp || {};
  window.EtoolsPmpApp.Mixins = window.EtoolsPmpApp.Mixins || {};
   /*
  * @polymer
  * @mixinFunction
  * @appliesMixin EtoolsLogsMixin
  */
  EtoolsPmpApp.Mixins.ScrollControl = Polymer.dedupingMixin((baseClass) => class extends EtoolsLogsMixin(baseClass) {

    static get properties() {
      return {
        contentContainer: {
          type: Object,
          value: function() {
            return window.contentContainer;
          },
          readOnly: true
        }
      };
    }

    connectedCallback() {
      super.connectedCallback();
      if (!window.contentContainer) {
        window.contentContainer = this._getContentContainer();
      }
    }

    _getContentContainer() {
      if (window.isIE) {
        return document.documentElement;
      }
      let appShell = document.querySelector('app-shell');
      if (!appShell) {
        return null;
      }
      let appHeadLayout = appShell.shadowRoot.querySelector('#appHeadLayout');
      if (!appHeadLayout) {
        return null;
      }
      return appHeadLayout.shadowRoot.querySelector('#contentContainer');
    }

    scrollToTop() {
      if (!this.contentContainer) {
        this.logWarn('Cannot scroll! `contentContainer` object is null or undefined', 'scroll-control-mixin');
        return;
      }
      this.contentContainer.scrollTop = 0;
    }

    scrollToTopOnCondition(condition) {
      if (condition) {
        this.scrollToTop();
      }
    }

  });
</script>
