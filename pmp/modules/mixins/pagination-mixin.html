<script>
  window.EtoolsPmpApp = window.EtoolsPmpApp || {};
  window.EtoolsPmpApp.Mixins = window.EtoolsPmpApp.Mixins || {};
   /*
  * @polymer
  * @mixinFunction
  */
  EtoolsPmpApp.Mixins.Pagination = (baseClass) => class extends baseClass {
    static get properties() {
      return {
        paginator: {
          type: Object,
          value: function() {
            return {
              page: 1,
              page_size: 10,
              count: 0,
              visible_range: []
            };
          },
          notify: true
        }
      };
    }

    pageSizeChanged(e) {
      this.set('paginator.page', 1);
      this.set('paginator.page_size', parseInt(e.detail.value, 10));
    }

    pageNumberChanged(e) {
      this.set('paginator.page', parseInt(e.detail.value, 10));
    }

    getRequestPaginationParams() {
      return {
        page: this.paginator.page,
        page_size: this.paginator.page_size
      };
    }

    updatePaginatorTotalResults(reqResponse) {
      if (reqResponse && reqResponse.count) {
        let count = parseInt(reqResponse.count, 10);
        if (!isNaN(count)) {
          this.set('paginator.count', count);
          return;
        }
      }
      this.set('paginator.count', 0);
    }
  };
</script>
