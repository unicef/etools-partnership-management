<link rel="import" href="../../redux/etools-data-redux-store.html">
<link rel="import" href="../../scripts/lodash.html">
<script>
  (function() {
    'use strict';

    window.EtoolsPmpApp = window.EtoolsPmpApp || {};
    window.EtoolsPmpApp.Mixins = window.EtoolsPmpApp.Mixins || {};
    /**
     * @polymer
     * @mixinFunction
     * @appliesMixin EtoolsPmpApp.Mixins.EtoolsDataReduxStore
     */
    EtoolsPmpApp.Mixins.DropdownsPmpData =
        baseClass => class extends EtoolsPmpApp.Mixins.EtoolsDataReduxStore(baseClass) {

          static get actions() {
            return {
              setFileTypes: function(fileTypesData) {
                return {
                  type: 'SET_FILE_TYPES',
                  fileTypes: fileTypesData
                };
              },
              setCpOutputs: function(cpOutputsData) {
                return {
                  type: 'SET_CP_OUTPUTS',
                  cpOutputs: cpOutputsData
                };
              },
              setSignedByUnicefUsers: function(signedByUnicefUsersData) {
                return {
                  type: 'SET_SIGNED_BY_UNICEF_USERS',
                  signedByUnicefUsers: signedByUnicefUsersData
                };
              }
            };
          }

          _handleDropdownsPmpResponse(response) {
            if (!_.isEmpty(response)) {
              // set file types value
              if (!_.isEmpty(response.file_types)) {
                this.dispatch('setFileTypes', response.file_types);
              }

              // set CP Outputs values
              if (!_.isEmpty(response.cp_outputs)) {
                this.dispatch('setCpOutputs', response.cp_outputs);
              }
              // set Signed By UNICEF Users
              if (!_.isEmpty(response.signed_by_unicef_users)) {
                this.dispatch('setSignedByUnicefUsers', response.signed_by_unicef_users);
              }
            }
          }

        };

  })();
</script>

