<link rel="import" href="../../../../../../../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../../../../../../../bower_components/polymer/lib/elements/dom-if.html">
<link rel="import" href="../../../../../../../../bower_components/polymer/lib/elements/dom-repeat.html">

<link rel="import" href="styles/disaggregation-table-styles.html">
<link rel="import" href="disaggregation-table-cell-number.html">
<link rel="import" href="disaggregation-table-cell-percentage.html">
<link rel="import" href="disaggregation-table-cell-ratio.html">

<link rel="import" href="../../../../../../mixins/utils-mixin.html">

<dom-module id="disaggregation-table-row">
  <template strip-whitespace>
    <style include="disaggregation-table-styles">
      :host {}
    </style>

    <tr class$="[[_computeClass(rowType)]]">
      <td class="cellTitle">
        <span class="cellValue">[[_capitalizeFirstLetter(data.title)]]</span>
      </td>

      <template is="dom-repeat"
                items="[[data.data]]">
        <td>
          <template
              is="dom-if"
              if="[[_equals(indicatorType, 'number')]]"
              restamp="true">
            <disaggregation-table-cell-number data="[[item.data]]"></disaggregation-table-cell-number>
          </template>

          <template
              is="dom-if"
              if="[[_equals(indicatorType, 'percentage')]]"
              restamp="true">
            <disaggregation-table-cell-percentage data="[[item.data]]"></disaggregation-table-cell-percentage>
          </template>

          <template
              is="dom-if"
              if="[[_equals(indicatorType, 'ratio')]]"
              restamp="true">
            <disaggregation-table-cell-ratio data="[[item.data]]"></disaggregation-table-cell-ratio>
          </template>

        </td>
      </template>

      <template
          is="dom-if"
          if="[[data.total]]">
        <td class="cellTotal">
          <template
              is="dom-if"
              if="[[_equals(indicatorType, 'number')]]"
              restamp="true">
            <disaggregation-table-cell-number data="[[data.total.data]]"></disaggregation-table-cell-number>
          </template>

          <template
              is="dom-if"
              if="[[_equals(indicatorType, 'percentage')]]"
              restamp="true">
            <disaggregation-table-cell-percentage data="[[data.total.data]]"></disaggregation-table-cell-percentage>
          </template>

          <template
              is="dom-if"
              if="[[_equals(indicatorType, 'ratio')]]"
              restamp="true">
            <disaggregation-table-cell-ratio data="[[data.total.data]]"></disaggregation-table-cell-ratio>
          </template>
        </td>
      </template>
    </tr>
  </template>

  <script>
    'use strict';

    /**
     * @polymer
     * @customElement
     * @appliesMixin EtoolsPmpApp.Mixins.Utils
     */
    class DisaggregationTableRow extends EtoolsPmpApp.Mixins.Utils(Polymer.Element) {

      static get is() {
        return 'disaggregation-table-row';
      }

      static get properties() {
        return {
          data: Object,
          indicatorType: String,
          rowType: String
        };
      }

      _computeClass(rowType) {
        return rowType;
      }

    }

    window.customElements.define(DisaggregationTableRow.is, DisaggregationTableRow);
  </script>
</dom-module>
