<link rel="import" href="../redux/etools-data-redux-store.html">
<script>
  'use strict';

  window.EtoolsPmpApp = window.EtoolsPmpApp || {};
  window.EtoolsPmpApp.Mixins = window.EtoolsPmpApp.Mixins || {};

  /**
   * @polymer
   * @mixinFunction
   * @appliesMixin EtoolsPmpApp.Mixins.EtoolsDataReduxStore
   */
  EtoolsPmpApp.Mixins.AmendmentModeUIMixin = Polymer.dedupingMixin(
      baseClass => class extends EtoolsPmpApp.Mixins.EtoolsDataReduxStore(baseClass) {

        static get properties() {
          return {
            amendmentModeActive: {
              type: Boolean,
              statePath: 'pageData.in_amendment'
            }
          };
        }

        _getPageContainerClass(amendmentModeActive) {
          return amendmentModeActive ? 'in-amendment' : '';
        }

        _closeAmendment() {
          /**
           * For now amendment mode is PD specific, but if needed can be used on any page with this method code updated
           */
          let intervElem = this.shadowRoot.querySelector('#interventions');
          if (intervElem) {
            intervElem._showFinalizeAmendmentDialog();
          }
        }

      });
</script>
