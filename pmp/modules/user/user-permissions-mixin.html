<script>
  window.EtoolsPmpApp = window.EtoolsPmpApp || {};
  window.EtoolsPmpApp.Mixins = window.EtoolsPmpApp.Mixins || {};

  /**
   * User permissions mixin
   * @polymer
   * @mixinFunction
   */
  EtoolsPmpApp.Mixins.UserPermissions = Polymer.dedupingMixin(superClass => class extends superClass {
    getAllPermissions() {
      return {
        defaultPermissions: [
          'loggedInDefault',
          'userInfoMenu',
          'viewPartnerDetails',
          'viewAgreementDetails',
          'viewInterventionDetails'
        ],
        unicefUserPermissions: [
          'editInterventionDetails'
        ],
        superPermissions: [
          'loggedInDefault',
          'userInfoMenu',
          'interventionsMenu',
          'statsMenu',
          'viewPartnerDetails',
          'editPartnerDetails',
          'viewAgreementDetails',
          'editAgreementDetails',
          'viewInterventionDetails',
          'editInterventionDetails'
        ],
        partnershipManagerPermissions: [
          'partnershipManager',
          'editPartnerDetails',
          'editAgreementDetails',
          'editInterventionDetails'
        ],
        PMEPermissions: [
          'PME'
        ],
        ICTPermissions: [
          'ICT'
        ]
      };
    }

    userIsPme(user) {
      if (!user || !Array.isArray(user.groups)) {
        return false;
      }
      return !!_.find(user.groups, (grp) => {
        return grp.name === 'PME';
      });
    }
  });

</script>
