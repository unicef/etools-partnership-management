<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../../bower_components/paper-input/paper-textarea.html">
<link rel="import" href="../../../bower_components/paper-input/paper-input-container.html">
<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../../bower_components/iron-collapse/iron-collapse.html">
<link rel="import" href="../../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../../bower_components/etools-content-panel/etools-content-panel.html">
<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../../bower_components/paper-radio-group/paper-radio-group.html">
<link rel="import" href="../../../bower_components/paper-radio-button/paper-radio-button.html">
<link rel="import" href="../../../bower_components/paper-input/paper-input-container.html">
<link rel="import" href="../../../bower_components/paper-input/paper-input-char-counter.html">
<link rel="import" href="../../../scripts/lodash/lodash.html">

<link rel="import" href="../../../bower_components/etools-content-panel/etools-content-panel.html">
<link rel="import" href="../common-elements/etools-error-messages-box.html">
<link rel="import" href="../../../bower_components/etools-searchable-multiselection-menu/etools-multi-selection-menu.html">

<link rel="import" href="../../app-behaviors/common-general-behavior.html">

<link rel="import" href="../../../styles/app-mixins.html">
<link rel="import" href="../../../styles/page-layout-styles.html">
<link rel="import" href="../../../styles/grid-layout-styles.html">
<link rel="import" href="../../../styles/shared-styles.html">
<link rel="import" href="reports-elems/indicator-details.html">

<dom-module id="report-progress">

  <template>

    <style include="page-layout-styles grid-layout-styles shared-styles iron-flex iron-flex-factors">
      :host {
        @apply --layout-vertical;
        width: 100%;

        --etools-checkable-input-label: {
          padding-bottom: 2px;
        }
      }
      .rejected {
        color: var(--rejected-color) !important;
      }
      .submitted {
        color: var(--success-color) !important;
      }
      .accepted {
        color: var(--primary-color) !important;
      }

      paper-input {
        width: 100%;
      }

      :host {
        display: block;
        margin-bottom: 25px;

        --ecp-content: {
          padding: 0;
        };

        --paper-icon-button: {
          color: var(--text-color, black);
        };
      }

      .header {
        padding: 25px;
      }

      .header labelled-item {
        font-size: 16px;
      }

      .header status-badge {
        position: relative;
        top: -2px;
      }

      .header labelled-item:not(:last-child) {
        margin-bottom: 25px;
      }

      .indicator:not(:last-child) {
        margin-bottom: 25px;
      }

      .indicator-toggle {
        width: 25px;
        position: relative;
        z-index: 1;
        color: white;
        background: red;
        cursor: pointer;
      }

      .indicator-header {
        padding: 6px 25px 6px 10px;
        background: var(--paper-grey-300);
      }

      .indicator-header__title h3 {
        margin: 0;
        font-size: 14px;
      }

      .status-badge {
        margin-right: 10px;
      }

      .indicator-header__target {
        width: 250px;
        padding-left: 10px;
      }

      .indicator-header__target dl {
        margin: 0;
        text-align: right;
        font-size: 11px;
      }

      .indicator-header__target dt {
        color: var(--secondary-text-color, grey);
      }

      .indicator-header__target dd {
        margin: 0;
        font-weight: bold;
      }

      paper-radio-group {
        margin-left: -12px;
      }
    </style>

      <etools-content-panel class="content-section" panel-title="PD Output of SSFA Expected Result 1">
        <div class="row-h flex-c">
          <div class="col col-5">
            <paper-textarea label="Result Statement"
                         value="Increased country capacity for evidence based policy dialogue and advanced something"
                         placeholder="&#8212;"
                         readonly></paper-textarea>
          </div>
          <div class="col col-2">
            <paper-input value="On track" always-float-label label="Overall Status" readonly>
                <iron-icon icon="av:fiber-manual-record" class="submitted" prefix></iron-icon>
            </paper-input>
          </div>
          <div class="col col-5">
            <paper-textarea label="Narative Assessment"
                         value="ILorem ipsum dolor sit amet, qui ea possit probatus expetenda, te alterum necessitatibus mel. Possit probatus expetenda, te alterum necessitatibus mel."
                         placeholder="&#8212;"
                         readonly></paper-textarea>
          </div>
        </div>
      </etools-content-panel>


      <etools-content-panel>

        <div class="indicator">
          <div class="layout horizontal">
            <div
                class="indicator-toggle flex-none layout horizontal center-center"
                on-tap="_toggle"
                toggles$="0"
                role="button"
                aria-expanded$="[[expanded]]"
                aria-controls$="collapse-0"
                tabindex="-1">
              <iron-icon
                  icon$="[[_computeIcon(expanded)]]">
              </iron-icon>
            </div>
                <!--on-tap="_toggle"-->

            <div class="indicator-header flex layout horizontal">
              <div class="indicator-header__title flex-3 layout vertical center-justified">
                <div class="layout horizontal">
                  <div class="status-badge layout vertical center-justified">
                    <report-status
                        status="1"
                        no-label>
                    </report-status>
                  </div>
                  <h3>Indicator Name</h3>
                </div>
              </div>
              <div class="indicator-header__target flex-none layout vertical center-justified">
                <dl class="layout horizontal justified">
                  <dt class="flex-3">Target:</dt>
                  <dd class="flex">..target</dd>
                </dl>
                <dl class="layout horizontal justified">
                  <dt class="flex-3">Total cumulative progress:</dt>
                    <dd class="flex"> 0.tcp</dd>

                </dl>
                <dl class="layout horizontal justified">
                  <dt class="flex-3">Achievement in reporting period:</dt>
                  <dd class="flex">0.arp</dd>
                </dl>
              </div>
            </div>
          </div>

          <iron-collapse
              id="collapse-0"
              opened="[[expanded]]"
              no-animation>
              <!--on-opened-changed="_handleOpenedChanged"-->
            <indicator-details
                id="indicatorDetails"
                reportable-id="0"
                indicator-name="Indicator-name"
                indicator-id="1"
                reporting-period="yesterday - the day after tomorrow"
                override-mode="view"
                disaggregations="[[disaggregations]]">
            </indicator-details>
          </iron-collapse>
        </div>


      </etools-content-panel>


  </template>

  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'report-progress',
        properties: {
          expanded: {
            type: Boolean,
            value: false
          },
          disaggregations: {
            type: Object,
            value: {
              "id": 2560,
              "title": "ratio_indicator_report_19",
              "indicator_location_data": [{
                "id": 16844,
                "indicator_report": 2560,
                "location": {
                  "id": 1,
                  "title": "location_0",
                  "latitude": null,
                  "longitude": null,
                  "p_code": null
                },
                "display_type": "percentage",
                "disaggregation": {
                  "()": {
                    "c": 0.11339062933185473,
                    "d": 3607,
                    "v": 409
                  }
                },
                "num_disaggregation": 1,
                "level_reported": 0,
                "disaggregation_reported_on": [],
                "location_progress": {
                  "c": 0.11339062933185473,
                  "d": 3607,
                  "v": 409
                },
                "previous_location_progress": {
                  "c": 0,
                  "d": 0,
                  "v": 0
                },
                "is_complete": true
              }, {
                "id": 16845,
                "indicator_report": 2560,
                "location": {
                  "id": 2,
                  "title": "location_1",
                  "latitude": null,
                  "longitude": null,
                  "p_code": null
                },
                "display_type": "percentage",
                "disaggregation": {
                  "(16614,)": {
                    "c": 0.21887461231723526,
                    "d": 2257,
                    "v": 494
                  },
                  "(16613,)": {
                    "c": 0.03417343015805212,
                    "d": 2341,
                    "v": 80
                  },
                  "(16612,)": {
                    "c": 0.021045485403937542,
                    "d": 2946,
                    "v": 62
                  },
                  "()": {
                    "c": 0.08430540827147402,
                    "d": 7544,
                    "v": 636
                  }
                },
                "num_disaggregation": 1,
                "level_reported": 1,
                "disaggregation_reported_on": [3834],
                "location_progress": {
                  "c": 0.08430540827147402,
                  "d": 7544,
                  "v": 636
                },
                "previous_location_progress": {
                  "c": 0,
                  "d": 0,
                  "v": 0
                },
                "is_complete": true
              }],
              "time_period_start": "2017-01-31",
              "time_period_end": "2017-01-31",
              "display_type": "percentage",
              "total": {
                "c": 0.09371356828983948,
                "d": 11151,
                "v": 1045
              },
              "remarks": null,
              "report_status": "Sub",
              "disagg_lookup_map": [{
                "id": 3834,
                "name": "gender",
                "active": true,
                "choices": [{
                  "id": 16614,
                  "value": "other",
                  "active": true
                }, {
                  "id": 16613,
                  "value": "female",
                  "active": true
                }, {
                  "id": 16612,
                  "value": "male",
                  "active": true
                }]
              }],
              "disagg_choice_lookup_map": [
                [
                  [16612, "male"],
                  [16613, "female"],
                  [16614, "other"]
                ]
              ]
            }
          },
        },

        ready: function() {
          // console.log(this.$.indicatorDetails)
          // console.log(this.$.indicatorDetails.init)
          // .init();
        },
        _computeIcon: function (opened) {
          return opened ? 'icons:expand-less' : 'icons:expand-more';
        },
        _toggle: function (e) {
          this.$$('#collapse-0').toggle();
          this.set('expanded', !this.expanded);
        },
      });

    })();
  </script>

</dom-module>
