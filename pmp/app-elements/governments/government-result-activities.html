<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/etools-ajax/etools-ajax.html">
<link rel="import" href="../../app-behaviors/repeatable-data-sets-behavior.html">
<link rel="import" href="../../app-config/etools-app-config.html">
<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../../styles/buttons-styles.html">
<link rel="import" href="../../../bower_components/paper-icon-button/paper-icon-button.html">

<dom-module id="government-result-activities">
  <template>
    <style include="iron-flex iron-flex-alignment iron-flex-factors buttons-styles">
      .activity {
        background: var(--activity-panel-background-color);
        border-radius: 8px;
        padding: 12px 24px;
        margin-top: 12px;
      }
      .activity paper-input {
        --paper-input-container-label-floating: {
          padding-bottom: 10px;
        };
        margin: 14px 0 8px 32px;
      }
      .activityId {
        flex: 0 0 55px;
        text-align: center;
      }
      .activityDesc {
        width: auto;
      }
    </style>
    <etools-ajax id="deleteAjax"
                 on-success="_handleDeleteResponse"
                 on-fail="_handleDeleteError"></etools-ajax>
		<template is="dom-repeat" items="{{dataItems}}" as="activity">
			<div class="layout horizontal activity">
				<!--Activity delete divider-->
				<div class="layout vertical center-justified activity-divider">
					<paper-icon-button class="action delete-activity"
														 on-tap="_openDeleteConfirmation"
														 data-args$="[[index]]"
														 hidden$="[[!editMode]]"
														 icon="cancel">
					</paper-icon-button>
				</div>
				<!--Activity data-->
				<div class="layout horizontal flex">
					<template is="dom-if" if="[[editMode]]">
						<paper-input
								id="activityId"
								class="activityId"
								label="Activity ID"
								value="{{activity.code}}"
								placeholder=" ">
						</paper-input>
						<div class="flex">
							<paper-input
									class="activityDesc"
									label="Activity Description"
									value="{{activity.description}}"
									placeholder=" ">
							</paper-input>
						</div>
					</template>
					<template is="dom-if" if="[[!editMode]]">
						<paper-input
								label="Activity ID"
								class="activityId"
								value="{{activity.code}}"
								readonly
								placeholder=" ">
						</paper-input>
						<div class="flex">
							<paper-input
									id="activityDesc"
									label="Activity Description"
									value="{{activity.description}}"
									readonly
									placeholder=" ">
							</paper-input>
						</div>
					</template>

				</div>
			</div>
		</template>
  </template>

  <script>
    Polymer({
      is: 'government-result-activities',
      properties: {
        dataItems: {
          type: Array,
          notify: true
        },
        _deleteEpName: {
          type: String,
					value: 'governmentResultActivityDelete',
					readOnly: true
        }
      },
      behaviors: [
        pmpBehaviors.RepeatableDataSetsBehavior,
        etoolsAppConfig.globals
      ]
    });
  </script>
</dom-module>