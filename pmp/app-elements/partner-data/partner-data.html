<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/etools-ajax/etools-ajax.html">

<dom-module id="partner-data">

  <template>
    <etools-ajax id="ajax"
                endpoint="[[endpoint]]"
                on-success="_handleResponse"></etools-ajax>
  </template>

  <script>

    Polymer({

      is: 'partner-data',
      behaviors: [etoolsAppConfig.globals],
      properties: {

        partner: {
          type: Object,
          readOnly: true,
          notify: true
        },

        _partners: {
          type: Object
        },

        partnerId: {
            type: Number,
            notify: true,
            observer: "_partnerIdChanged"
        }

      },
      _partnerIdChanged: function(newId){
          if (newId){
              this.endpoint = this.getEndpoint('partnerDetails',{id:newId});

          }
      },
      _handleResponse: function(response){
          this._setPartner(response.detail);
      }

    });

  </script>

</dom-module>
