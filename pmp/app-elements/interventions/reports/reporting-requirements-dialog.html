<link rel="import" href="../../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../../bower_components/etools-dialog/etools-dialog.html">
<link rel="import" href="../../../../bower_components/iron-label/iron-label.html">

<link rel="import" href="../../../app-config/app-dexie-db-config.html">
<link rel="import" href="../../../../styles/shared-styles.html">
<link rel="import" href="../../../../styles/grid-layout-styles.html">
<link rel="import" href="../../common-elements/etools-date-input.html">

<dom-module id="reporting-requirements-dialog">
  <template>
    <style include="shared-styles grid-layout-styles">
      [hidden] {
        display: none !important;
      }
      #content-box {
        margin-bottom: 20px;
      }
    </style>
    <etools-dialog
        id="reportingRequirementsDialog"
        size="md"
        no-padding
        ok-btn-text="Save"
        cancel-btn-text="Cancel"
        dialog-title="Add/Edit Reporting Requirements"
        on-close="_handleDialogClosed"
        hidden$="[[_isDatePickerOpen(startDateOpen, endDateOpen, dueDateOpen)]]">
      <div id="content-box">
        <div class="row-h">
          <div class="col col-4">
            <etools-date-input id="reportingPeriodStartDate"
                               label="Reporting Period Start Date"
                               value="{{requirement.start_date}}"
                               open="{{startDateOpen}}"
                               no-init show-clear-btn>
            </etools-date-input>
          </div>
          <div class="col col-4">
            <etools-date-input id="reportingPeriodEndDate"
                               label="Reporting Period End Date"
                               value="{{requirement.end_date}}"
                               open="{{endDateOpen}}"
                               no-init show-clear-btn>
            </etools-date-input>
          </div>
          <div class="col col-4">
            <etools-date-input id="reportingPeriodDueDate"
                               label="Reporting Period Due Date"
                               value="{{requirement.due_date}}"
                               open="{{dueDateOpen}}"
                               no-init show-clear-btn>
            </etools-date-input>
          </div>
        </div>
      </div>
    </etools-dialog>

  </template>

  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'reporting-requirements-dialog',
        behaviors: [
        ],
        properties: {
          requirement: {
            type: Object,
          },
          startDateOpen: {
            type: Boolean,
            value: false
          },
          endDateOpen: {
            type: Boolean,
            value: false
          },
          dueDateOpen: {
            type: Boolean,
            value: false
          }
        },
        observers: [
        ],

        open: function() {
          if (!this.$.reportingRequirementsDialog.opened) {
            this.$.reportingRequirementsDialog.opened = true;
          }
        },

        _handleDialogClosed: function(closingReason) {
          if (closingReason.detail.confirmed) {
            this.fire('save-requirement', this.requirement);
          }
        },

        _isDatePickerOpen: function(startDateOpen, endDateOpen, dueDateOpen) {
          return startDateOpen || endDateOpen || dueDateOpen;
        }
      });
    })();
  </script>
</dom-module>

