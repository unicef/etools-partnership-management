
<link rel="import" href="../../bower_components/etools-dexiejs/dexie.html">

<script>
  /**
   * PMP app Dexie DB configuration.
   * For db versioning check: http://dexie.org/docs/Tutorial/Design
   */

  window.EtoolsPmpApp = window.EtoolsPmpApp || {};

  EtoolsPmpApp.DexieDb = new Dexie('pmpApp');
  EtoolsPmpApp.DexieDb.version(1).stores({
    collectionsList: 'name, expire',
    partners: 'id, name, rating, vendor_number',
    agreements: 'id, agreement_number, agreement_type, partner_name, start, end, status',
    interventions: 'id, number, partner_name, document_type, ' +
    'cp_outputs, status, title, start, end, sectors, unicef_focal_points, offices',

    // etools-ajax v2.0.0 requirements
    // TODO: refactor above dexie version collections
    listsExpireMapTable: "&name, expire",
    ajaxDefaultDataTable: "&cacheKey, data, expire",
  });

  // this is needed by etools-ajax
  // TODO: remove once etools-ajax v2 is released
  var etoolsCustomDexieDb = EtoolsPmpApp.DexieDb;

  // configure app dexie db to be used for caching
  window.EtoolsRequestCacheDb = window.EtoolsRequestCacheDb || EtoolsPmpApp.DexieDb;
</script>
