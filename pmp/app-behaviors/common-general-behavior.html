<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="date-behavior.html">
<script>
  window.pmpBehaviors = window.pmpBehaviors || {};
  pmpBehaviors.CommonGeneralBehaviorImpl = {

    /**
     * Prepare and return the string value we have to display on the interface.
     * Ex: partners and agreements lists data values.
     */
    getDisplayValue: function(value, isDate, separator) {
      if (typeof value === 'string' && value != '') {
        if (isDate) {
          return this.prettyDate(value);
        } else {
          return value;
        }
      } else if (Array.isArray(value) && value.length > 0) {
        if (!separator) {
          separator = ', ';
        }
        return value.join(separator);
      }
      return "â€“";
    },

    /**
     * Update URL params
     */
    updateAppState: function(routePath, qs, dispatchLocationChange) {
      // Using replace state to change the URL here ensures the browser's
      // back button doesn't take you through every query
      var currentState = window.history.state;
      window.history.replaceState(currentState, null,
          routePath + (qs.length ? '?' + qs : ''));

      if (dispatchLocationChange) {
        // This event lets app-location and app-route know
        // the URL has changed
        window.dispatchEvent(new CustomEvent('location-changed'));
      }
    },

  };

  pmpBehaviors.CommonGeneralBehavior = [
    pmpBehaviors.DateBehavior,
    pmpBehaviors.CommonGeneralBehaviorImpl
  ];
</script>
