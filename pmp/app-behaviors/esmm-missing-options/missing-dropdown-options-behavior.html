<link rel="import" href="../../app-config/app-endpoints-behavior.html">
<script>
  window.EtoolsPmpApp = window.EtoolsPmpApp || {};
  window.EtoolsPmpApp.Behaviors = window.EtoolsPmpApp.Behaviors || {};
  /** @polymerBehavior EtoolsPmpApp.Behaviors.MissingDropdownOptionsImpl */
  EtoolsPmpApp.Behaviors.MissingDropdownOptionsImpl = {

    setDropdownMissingOptionsAjaxDetails: function(dropdownEl, endpointName, params) {
      try {
        if (dropdownEl) {
          var endpointUrl = this.getMissingOptionsEndpointUrl(endpointName);
          params = (params) ? params : {};

          dropdownEl.set('ajaxParams', params);
          dropdownEl.set('url', endpointUrl);
        } else {
          console.warn('Esmm element is null and the endpoint ' + endpointName + ' url can not be assigned to it!');
        }
      } catch (err) {
        console.warn('An error occurred at ghost data esmm setup.', err);
      }
    },

    getMissingOptionsEndpointUrl: function(endpointName) {
      var endpoint = this.getEndpoint(endpointName);
      if (endpoint && endpoint.url) {
        return endpoint.url;
      }
      return null;
    },

    getCleanEsmmOptions: function(options) {
      return (options instanceof Array) ? options.slice(0) : [];
    }

  };

  /** @polymerBehavior EtoolsPmpApp.Behaviors.MissingDropdownOptions */
  EtoolsPmpApp.Behaviors.MissingDropdownOptions = [
    EtoolsPmpApp.Behaviors.Endpoints,
    EtoolsPmpApp.Behaviors.MissingDropdownOptionsImpl
  ];
</script>
