<script>
  window.EtoolsPmpApp = window.EtoolsPmpApp || {};
  window.EtoolsPmpApp.Behaviors = window.EtoolsPmpApp.Behaviors || {};

  /** @polymerBehavior EtoolsPmpApp.Behaviors.AmendmentMode */
  EtoolsPmpApp.Behaviors.AmendmentMode = {

    properties: {
      amendmentModeActive: {
        type: Boolean,
        value: false
      }
    },

    listeners: {
      'set-amendment-mode': '_updateAmendmentMode'
    },

    _updateAmendmentMode: function(event) {
      let detail = event.detail || {};
      this._setAmendMode(detail.active);
    },

    _getPageContainerClass: function(amendmentModeActive) {
      return amendmentModeActive ? 'in-amendment' : '';
    },

    _setAmendMode: function(newVal) {
      this.set('amendmentModeActive', !!newVal);
    },

    _closeAmendment: function() {
      let intervElem = this.$$('#interventions');
      if (intervElem) {
        intervElem._showFinalizeAmendmentDialog();
      }
    }

  };
</script>
