<script>
  (function() {
    'use strict';

    window.EtoolsPmpApp = window.EtoolsPmpApp || {};
    window.EtoolsPmpApp.Behaviors = window.EtoolsPmpApp.Behaviors || {};
    /** @polymerBehavior EtoolsPmpApp.Behaviors.Utils */
    EtoolsPmpApp.Behaviors.Utils = {
      _equals: function(a, b) {
        return a === b;
      },

      _toNumber: function(val) {
        return Number(val);
      },

      _capitalizeFirstLetter: function(text) {
        if (text) {
          return text[0].toUpperCase() + text.substring(1);
        }
      },

      _deferred: function() {
        let defer = {};

        defer.promise = new Promise(function(resolve, reject) {
          defer.resolve = resolve;
          defer.reject = reject;
        });

        return defer;
      },

      _toPercentage: function(value) {
        return value == null /* undefinded & null */ ? // jshint ignore:line
            value : Math.floor(value * 100) + '%';
      },

      _fieldsAreValid: function() {
        let valid = true;
        let fields = [].slice.call(
            Polymer.dom(this.root).querySelectorAll('.validate')
        );
        // NOTE: NodeList.forEach is not supported by older browsers(min IE11),
        // using Array.prototype.forEach.call instead
        Array.prototype.forEach.call(fields, function(field) {
          if (!field.validate()) {
            valid = false;
          }
        });

        return valid;
      }
    };
  }());
</script>

