<script>
  window.EtoolsPmpApp = window.EtoolsPmpApp || {};
  window.EtoolsPmpApp.Behaviors = window.EtoolsPmpApp.Behaviors || {};

  /** @polymerBehavior EtoolsPmpApp.Behaviors.Pagination */
  EtoolsPmpApp.Behaviors.Pagination = {
    properties: {
      paginator: {
        type: Object,
        value: {
          page: 1,
          page_size: 10,
          count: 0,
          visible_range: []
        }
      }
    },

    pageSizeChanged: function(e) {
      this.set('paginator.page', 1);
      this.set('paginator.page_size', parseInt(e.detail.value, 10));
    },

    pageNumberChanged: function(e) {
      this.set('paginator.page', parseInt(e.detail.value, 10));
    },

    getRequestPaginationParams: function() {
      return {
        page: this.paginator.page,
        page_size: this.paginator.page_size
      }
    },

    updatePaginatorTotalResults: function(reqResponse) {
      if (reqResponse && reqResponse.count) {
        let count = parseInt(reqResponse.count, 10);
        if (!Number.isNaN(count)) {
          this.set('paginator.count', count);
          return;
        }
      }
      this.set('paginator.count', 0);
    }
  };
</script>
