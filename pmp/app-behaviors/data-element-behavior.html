<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../app-config/etools-app-config.html"/>
<script>
  window.pmpBehaviors = window.pmpBehaviors || {};
  /** @polymerBehavior pmpBehaviors.DataElementBehavior */
  pmpBehaviors.DataElementBehaviorImpl = {

    properties: {
      endpoint: Object,
      data: {
        type: Array,
        readOnly: true,
        notify: true
      },

      db: {
        type: Object,
        value: function() {
          return etoolsAppConfig.db;
        }
      },

      fireDataLoaded: {
        type: Boolean,
        value: false
      },

      showLoading: {
        type: Boolean,
        value: false
      }

    },

    ready: function() {
      this._elementReady();
    },

    _elementReady: function() {
      if (!this.endpointName) {
        console.warn('Please specify an endpointName property');
      } else {
        this.endpoint = this.getEndpoint(this.endpointName);
      }
    },

    _handleResponse: function(res) {
      this._setData(res.detail);
      if (this.fireDataLoaded) {
        if (!this.dataLoadedEventName) {
          console.warn('Please specify data loaded event name(dataLoadedEventName property)');
        } else {
          this.fire(this.dataLoadedEventName);
        }
      }
    },

  };

  pmpBehaviors.DataElementBehavior = [
    etoolsAppConfig.globals,
    pmpBehaviors.DataElementBehaviorImpl
  ];

</script>
