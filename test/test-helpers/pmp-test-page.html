<script src="../../bower_components/iron-test-helpers/mock-interactions.js"></script>
<link rel="import" href="testing-utils.html">
<script>
  'use strict';

  class PmpTestPage {

    constructor(element, elementsMap) {
      this.el = element;
      this.mainPageElements = {};
      if(elementsMap instanceof Array) {
        elementsMap.forEach((elMap) => {
          this.mainPageElements[elMap.name] = this.shadowDomQuery(elMap.selector);
        });
      }
    }

    updateProperties(properties) {
      for(let key in properties) {
        this.el.set(key, properties[key])
      }
    }

    _getQueryBaseElement(baseElement) {
      return !baseElement ? this.el : baseElement;
    }

    shadowDomQuery(selector, all, baseElement) {
      baseElement = this._getQueryBaseElement(baseElement);
      let baseElShadowDom = Polymer.dom(baseElement.root);
      return all ? baseElShadowDom.querySelectorAll(selector) : baseElShadowDom.querySelector(selector);
    }

    domQuery(selector, all, baseElement) {
      baseElement = this._getQueryBaseElement(baseElement);
      let baseElDom = Polymer.dom(baseElement);
      return all ? baseElDom.querySelectorAll(selector) : baseElDom.querySelector(selector);
    }

    isVisible(element) {
      return PmpTestsHelper.elementIsVisible(element);
    }

    isVisibleByKey(key) {
      return !this.mainPageElements[key] ? false : this.isVisible(this.mainPageElements[key]);
    }

  }
</script>
