<link rel="import" href="../../bower_components/polymer/polymer.html">

<!--<link rel="import" href="../common/etools-ajax/etools-ajax.html">-->
<!--<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout.html">-->
<link rel="import" href="../../styles/pmp/layout-styles.html">
<link rel="import" href="../../styles/pmp/form-fields-styles.html">

<link rel="import" href="../../../bower_components/iron-form/iron-form.html">
<link rel="import" href="../../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../../bower_components/iron-icons/communication-icons.html">
<link rel="import" href="../../../bower_components/iron-collapse/iron-collapse.html">

<link rel="import" href="../../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../../bower_components/paper-item/paper-item.html">

<link rel="import" href="../content-panel/content-panel.html">
<link rel="import" href="../common/etools-datepicker/etools-datepicker.html">
<link rel="import" href="../files-upload/files-upload.html">
<link rel="import" href="../content-toggle-button/content-toggle-button.html">
<link rel="import" href="../assessments-items/assessments-items.html">
<link rel="import" href="../staff-members/staff-members.html">
<link rel="import" href="../custom-checkbox/custom-checkbox.html">

<dom-module id="partner-details">
  <template>
    <style include="layout-styles"></style>
    <style include="form-fields-styles"></style>
    <style>
      :host {

      }
      paper-checkbox {
        margin-left: 25px;
      }
      .row:not(:first-child):not(.iron-collapse-closed) {
        margin-top: 20px;
      }
      .alternate-name-btn {
        margin-bottom: 7px;
        margin-left: 25px;
      }
      .alternate-fields {
        background-color: #f0f3f5;
      }
      .alternate-fields-content {
        padding: 10px;
        box-sizing: border-box;
      }
      .alternate-fields-content .org-diff-label {
        text-transform: uppercase;
        color: #737373;
        font-size: 12px;
        width: 190px;
        line-height: 1.4;
        padding: 11px 0;
      }
      .contact-info,
      .assessments {
        border-top: 1px solid #dedede;
        padding-top: 20px;
      }
      .contact-info {
        margin-top: 10px;
      }
      .assessments {
        margin-top: 20px;
      }





      .submit-btn {
        margin-top: 20px;
      }

    </style>

    <form is="iron-form" id="addPartnerDetailsForm" method="post" action="/api/testing-custom-elements">
      <paper-checkbox id="alreadyPartner" name="already_partner">Partner already exists in VISION?</paper-checkbox>
      <content-panel title="Partner Details">
        <div class="row flex-horizontal">
          <!-- Organization name -->
          <paper-input name="organization_name"
                       class="b-input-field"
                       label="Organization's Full Name*"
                       required auto-validate
                       error-message="Please fill organization's full name!"></paper-input>

          <!-- Short name -->
          <paper-input name="short_name"
                       class="n-input-field"
                       label="Short Name"></paper-input>

          <!-- Alternate option -->
          <div class="alternate-name-btn flex-bottom-aligned">
            <content-toggle-button content="[[getIronCollapseElement('#alternateNameFields')]]" label="Alternate Name?"></content-toggle-button>
          </div>

        </div>
        <iron-collapse id="alternateNameFields" class="row alternate-fields">
          <!-- Alternate option fields -->
          <div class="alternate-fields-content flex-horizontal">
            <span class="org-diff-label">Organization's name in a different language</span>

            <!-- Right to left option -->
            <div class="custom-field-wrapper n-input-field">
              <custom-checkbox checked="true" label="Right to left"></custom-checkbox>
            </div>

            <!-- Alternate name -->
            <paper-input name="alternate_name"
                         class="n-input-field"
                         label="Alternate Name"></paper-input>

            <!-- Alternate ID -->
            <paper-input name="alternate_id"
                         class="n-input-field"
                       label="Alternate ID (if any)"></paper-input>
          </div>
        </iron-collapse>
        <div class="row flex-horizontal">
          <!-- Partner types -->
          <paper-dropdown-menu id="partnerType"
                               class="n-input-field"
                               name="partner_type"
                               label="Partner Type*"
                               is="iron-input"
                               required
                               error-message="Please select partener type!"
                               on-iron-select="validateDropdownValue"
                               on-paper-dropdown-open="dropdownOnOpen">
            <paper-listbox class="dropdown-content">
              <paper-item>Partner Type 1</paper-item>
              <paper-item>Partner Type 2</paper-item>
              <paper-item>Partner Type 3</paper-item>
              <paper-item>Partner Type 4</paper-item>
            </paper-listbox>
          </paper-dropdown-menu>

          <!-- CSO type -->
          <paper-dropdown-menu class="n-input-field"
                               name="cso_type"
                               label="CSO Type*"
                               required
                               error-message="Please select CSO type!">
            <paper-listbox class="dropdown-content">
              <paper-item>CSO Type 1</paper-item>
              <paper-item>CSO Type 2</paper-item>
              <paper-item>CSO Type 3</paper-item>
              <paper-item>CSO Type 4</paper-item>
            </paper-listbox>
          </paper-dropdown-menu>

          <!-- Core values assessment file -->
          <div class="n-input-field">
              <files-upload target="/path/to/destination" label="Core values assessment*"></files-upload>
          </div>

          <!-- Last accessed date -->
          <paper-input class="n-input-field"
                       label="Date last accessed*"
                       name="date_last_accessed"
                       value="[[dateLastAccessed]]">
            <div prefix><etools-datepicker pretty-date="{{dateLastAccessed}}" format="MM/DD/YYYY"></etools-datepicker></div>
          </paper-input>

          <!-- Shared partner -->
          <paper-dropdown-menu class="n-input-field"
                               label="Shared Partner"
                               name="shared_partner">
            <paper-listbox class="dropdown-content">
              <paper-item>Shared Partner 1</paper-item>
              <paper-item>Shared Partner 2</paper-item>
              <paper-item>Shared Partner 3</paper-item>
              <paper-item>Shared Partner 4</paper-item>
            </paper-listbox>
          </paper-dropdown-menu>

        </div>

        <div class="contact-info">
          <content-toggle-button content="[[getIronCollapseElement('#contactInfoFields')]]" label="Contact Info"></content-toggle-button>
          <!-- Contact info fields -->
          <iron-collapse id="contactInfoFields">
            <div class="flex-horizontal">
              <!-- Address -->
              <paper-input name="address"
                           class="b-input-field"
                           label="Address">
                <paper-icon-button prefix icon="communication:location-on"></paper-icon-button>
              </paper-input>

              <!-- City -->
              <paper-input name="city"
                           class="n-input-field"
                           label="City">
              </paper-input>
            </div>
            <div class="flex-horizontal">
              <!-- Telephone number -->
              <paper-input name="phone_number"
                           class="n-input-field"
                           label="Phone Number">
                <paper-icon-button prefix icon="communication:phone"></paper-icon-button>
              </paper-input>

              <!-- Email address -->
              <paper-input name="email_address"
                           class="n-input-field"
                           label="E-mail address">
                <paper-icon-button prefix icon="communication:email"></paper-icon-button>
              </paper-input>
            </div>
          </iron-collapse>
        </div>

      </content-panel>

      <content-panel title="Risk Rating & Assessments">
        <div class="row flex-horizontal">
          <!-- Vendor number -->
          <paper-input name="vendor_number"
                       class="n-input-field"
                       disabled="true"
                       label="Vendor Number"></paper-input>

          <!-- Risk rating -->
          <paper-dropdown-menu class="n-input-field"
                               label="Risk Rating"
                               disabled="true"
                               name="risk_rating">
            <paper-listbox class="dropdown-content">
              <paper-item>Low</paper-item>
              <paper-item>Moderate</paper-item>
              <paper-item>High</paper-item>
            </paper-listbox>
          </paper-dropdown-menu>
        </div>
        <div class="row flex-horizontal">
          <!-- Type of assessment -->
          <paper-input name="assessment_type"
                       class="n-input-field"
                       disabled="true"
                       label="Type of Assessment"></paper-input>

          <!--Date last assessed-->
          <paper-input name="date_last_assessed"
                       class="n-input-field"
                       disabled="true"
                       label="Date Last Assessed"></paper-input>
        </div>

        <!-- Assessments section -->
        <div class="assessments">
          <assessments-items assessments-data="{{assessmentsData}}"></assessments-items>
        </div>
      </content-panel>

      <content-panel no-header="true">
        <content-toggle-button content="[[getIronCollapseElement('#bankDetails')]]" label="Bank Details"></content-toggle-button>
        <!-- Bank details-->
        <iron-collapse id="bankDetails">
          <div class="row flex-horizontal">
            <!-- Bank name-->
            <paper-input name="bank_name"
                         class="b-input-field"
                         disabled="true"
                         label="Bank Name"></paper-input>

            <!-- Bank contact person -->
            <paper-input name="bank_contact_person"
                         class="n-input-field"
                         disabled="true"
                         label="Contact Person"></paper-input>
          </div>
          <div class="row flex-horizontal">
            <!-- Bank address -->
            <paper-input name="bank_address"
                         class="xl-input-field"
                         disabled="true"
                         label="Bank Address">
              <paper-icon-button prefix icon="communication:location-on"></paper-icon-button>
            </paper-input>
          </div>
          <div class="row flex-horizontal">
            <!-- Bank account title -->
            <paper-input name="bank_account_title"
                         class="n-input-field"
                         disabled="true"
                         label="Account Title"></paper-input>

            <!-- Bank account number -->
            <paper-input name="bank_account_number"
                         class="n-input-field"
                         disabled="true"
                         label="Account Number"></paper-input>

            <!-- Bank routing number -->
            <paper-input name="bank_routing_number"
                         class="n-input-field"
                         disabled="true"
                         label="Routing Number"></paper-input>
          </div>
        </iron-collapse>
      </content-panel>

      <content-panel no-header="true">
        <!-- Staff members details-->
        <staff-members staff-members-data="{{staffMembersData}}"></staff-members>
      </content-panel>

    </form>
    <paper-button class="submit-btn" raised on-tap="submitFormTest">Submit</paper-button>

  </template>

  <script>
    (function() {
      // jscs:disable
      'use strict';

      Polymer({
        is: 'partner-details',
        properties: {
          assessmentsData: {
            type: Array,
            value: []
          },
          staffMembersData: {
            type: Array,
            value: []
          }
        },
//        listeners: {
//          'addPartnerDetailsForm.iron-form-presubmit': 'formPresubmit'
//        },
        getIronCollapseElement: function (elementId) {
          return Polymer.dom(this.root).querySelector(elementId);
        },

//        validateDropdownValue: function () {
//          console.log(this.$.partnerType.selectedItemLabel);
//          if (this.$.partnerType.selectedItemLabel === 'Partner Type 3') {
//            this.$.partnerType.invalid = true;
//          }
//        },
//        dropdownOnOpen: function() {
//          console.log(this.$.partnerType.selectedItemLabel);
//        },
//        submitFormTest: function () {
//          console.log(this.$.addPartnerDetailsForm);
//          this.$.addPartnerDetailsForm.submit();
//        },
//        formPresubmit: function (event) {
//          event.preventDefault();
//          console.log(event, event.target.request.params);
//
//        },
//        toggleCollapse: function() {
//          this.$.collapseContentSection.toggle();
//        }
      });

    })();
  </script>
</dom-module>