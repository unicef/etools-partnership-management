<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/etools-ajax/etools-ajax.html">
<link rel="import" href="../../app-elements/lodash/lodash.html">


<dom-module id="etools-countries-data">
  <template>
    <etools-ajax id="ajax"
                 endpoint="[[endpoint]]"
                 on-success="_handleResponse"
                 caching-storage="dexie"></etools-ajax>
  </template>

  <script>
    (function() {
      'use strict';

      Polymer({

        is: 'etools-countries-data',

        properties: {
          countriesData: {
            type: Array,
            value: null,
            notify: true
          }
        },

        ready: function() {
          this.endpoint = etoolsAppConfig.globals.getEndpoint('countries');
        },

        _handleResponse: function(response) {
          if (!_.isEmpty(response.detail)) {
            this.set('countriesData', response.detail);
          }
        }

      });

    })();
  </script>

</dom-module>
